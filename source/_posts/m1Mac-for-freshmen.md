---
title: M1Macを買おうか迷っている新入生へ
date: 2022-03-05 18:22:24
tags:
categories:
---


# 結論

M1 Macは普段の大学生活で使う分には何も困らないです．起動爆速，サクサクで良いです．Office系は普通に使えます．（学部/学科で指定がある場合はそれに従うべき．工学部とか？）
Apple製品との連携も魅力だとよく言われます．ただ，大学からもらえるクラウドストレージはOneDrive 1TBなので，基本的に文章の同期はそこで行うことになり，Apple製品の連携(=iCloudで同期)の魅力はあまり感じないかもしれません．
ただし，生協のMacは買う前にほかの選択肢も考えてみてください．Apple Storeで買ったら去年はギフトカードでいくらか返ってきたりしました．Macを買って貰ったギフトカードでiPadを買うのも手かもしれません．ひとまずAppleの学生・教職員用のページを一回調べてみてください．

# 間違い・変な表現などを見つけた方へ
TwitterのDMか何かで教えてください．お願いします．

# M1MacとIntelMac，は何が違うのか？

「アーキテクチャ」が違います．M1MacはARM社が作ったCPUを使っていて，Inrtel MacやほとんどのWindows PCはIntel社が作ったCPUを使っています．

そもそもCPU(Central Processing Unit, 中央演算装置)とは何でしょうか？これはよくコンピュータの頭脳に例えられます．ただひたすらに命令された演算をこなしていく装置です．CPUは性能が高い＝処理速度が速くなります．頭の回転が速くなるイメージです．
次に，コンピュータの仕組みについて確認していきましょう．コンピュータの内部は全てが0と1の2進数で表される世界だというのはよく知られていると思います（電圧の高低が0と1に対応します）．でも，普段私たちがプログラミングするときは２進数をコンピュータに打ち込むのではなく，例えば↓

```c++

int main(){
    int a=1, b=2;
    cout << a + b << endl;
}

```

このような人間にもわかる文字で書かれた言語を用います．ではこれを誰がどのようにして0と1の２進数に変換しているのでしょうか．このコードはコンパイラというソフトウェアによって解析されて，機械語に翻訳されたあと，0と1で書かれたバイナリファイルと呼ばれるファイルに変更されます．

ここで！やっとCPUの違いが関係してきます．この機械語には色々な種類があります．その種類の一つ一つを命令セットというのですが，この命令セットがCPUを作っている会社ごとに違っているのです．日本人は日本語しか理解できず中国人は中国語しか理解できないみたいな感じです．だから，ARM社が作っているCPUはARM語しか理解して実行することができないし，Intel社のCPUはIntel語しかできません．（普通命令セットのことを〇〇語とは言わないです，例えです）
つまり，ARMのCPUはARM語から生成されたARM用のバイナリしか実行できないと言うことになります．

上のようなソースコードがCPUが実行できる形にこのようなプログラミング言語は基本的にどのようなCPUやアーキテクチャでも同じものを用いることができています．これはどう言うことでしょうか？実はコンパイラがそれぞれの機械語に合わせてバイナリコードを生成しているのです．結果的にこのコードはM1MacでもIntelのPCでも同じように実行することができるということです．


つまり，M1MacとIntelMacの違いは使用しているCPUの命令セットが違い，実行できるバイナリファイルの形式も違っていると言うことです．


# M1Macで困るのはどんな時か？

M1以前のMacははIntelのCPUが搭載されているので，世の中にあるソフトウェアは大抵Intel用のバイナリで出力されています．
じゃあARMのCPUが使われているM1Macはそれら全てが実行できないじゃないか！！と思ったかもしれません．

しかし，そんなことはありません．AppleはRosetta2というIntel用のバイナリをARM用のバイナリに変換してくれるソフトウェアを開発しているのです！！
このソフトウェアを使えば普通につかうGUIのソフトウェアは大抵IntelのCPUと変わらずにうまく動きます（うまく動かない場合もあります，それは使いたいソフトを実際に動かした人のレビューをみて確認しましょう）．それに，M1が発表されてから一年も立っているので，また，M1Mac用のバイナリを配布してくれているソフトも見かけます．

ということで，普通の用途に使う分には全然困らないと思います．ユーザーが多い有名なソフトは多分大丈夫です．
(※そもそもWindows用にしか配布されてないソフトウェアももちろんあります．WindowsのソフトはIntel Macでも実行できないです．)

## じゃあどんなときに困るのか？
例えば，M1Mac上に仮想環境を作ろうと思った時に困ります．仮想環境というのは，パソコンの中にもう一つパソコンがあることをシミュレーションする，みたいなイメージです．
そこで，普通IntelのCPUが使われるWindowsの仮想環境ををMacの中に立てたいと思ったとしましょう．しかし，WindowsのOSは普通Intel用のバイナリファイルなので，これを直接実行することはできません．
あとは開発用にLinuxというOSの仮想環境をDockerというツールを使って立てたいことがあります．こういう時にも仮想環境がうまく動かない場合があります．あるソフトウェアをクロスコンパイルしする場合とか…………．
これ以外困らないとは言えないですが，私が遭遇したのはこういう類の仮想環境周りだけなのでこの辺にしておきます．

あとはM1Macだけで機械学習するのは厳しいかもしれません（初心者の感想）．全然詳しくないけどちょっとやってみたレベルですが（だから他に方法があるのかもしれないですが），gpuが使えずcpuでしか実行できないので計算がめっちゃ遅くて何日か待っても全然終わらなかったことがありました．大人しくGoogle Colab使うのがいいと思います．それかお金貯めていいグラボがついてるデスクトップPCを買う．

## ちなみに……
私が所属する自然情報学科では，一年次にPythonとC言語を授業でやります．この授業の時にアーキテクチャ周りで困ることはなかったです．
C言語は秋学期なので全然今は気にしなくていいです．C言語はWindowsの環境構築しか紹介されないですが，macにはC言語のコンパイラが確かついているはずなので，大丈夫だと思います(clangってやつです)．(XCodeをインストールした時に一緒についてくる開発者ツールに入っていたものかも，忘れた)
「C言語 環境構築 mac」とかで調べたら出てくると思います．ちなみにコンパイラはclangの他にgccっていうのもあります．

# まとめ
M1Macは普段の学生生活においてはかっこいいしサクサクだし，困らんし，いいと思います．お勧めできます．
でも開発するときに詰まることがあるかもしれないです．

# 参考
- [ソフトウェア基礎技術研修](http://ocw.kyushu-u.ac.jp/menu/faculty/09/4/6.pdf)
- [コンパイラとは？仕組みやインタプリタ・アセンブラとの違いについて解説](https://tech-camp.in/note/technology/93686/)
- [インタプリタの仕組みをインタプリタ開発者が解説](https://yu-nix.com/blog/2020/11/17/interpreter-design/)
- [[新卒が作る自作OS]コンパイラの仕組み](https://tech-lab.sios.jp/archives/21161)
- [「分かりそう」で「分からない」でも「分かった」気になれるIT用語辞典:アーキテクチャ](https://wa3.i-3-i.info/word16015.html)